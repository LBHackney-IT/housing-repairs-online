"use strict";(self.webpackChunkhousing_repairs_online=self.webpackChunkhousing_repairs_online||[]).push([[37],{67:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>p,frontMatter:()=>a,metadata:()=>o,toc:()=>l});var r=i(4848),s=i(8453);const a={sidebar_position:1},t="Civica Universal Housing Integration",o={id:"spikes/uh-integration",title:"Civica Universal Housing Integration",description:"Introduction",source:"@site/docs/spikes/uh-integration.md",sourceDirName:"spikes",slug:"/spikes/uh-integration",permalink:"/housing-repairs-online/spikes/uh-integration",draft:!1,unlisted:!1,editUrl:"https://github.com/LBHackney-IT/housing-repairs-online/tree/main/docs/spikes/uh-integration.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Spikes",permalink:"/housing-repairs-online/category/spikes"},next:{title:"DRS Interfaces and Workflow",permalink:"/housing-repairs-online/spikes/drs-interface"}},d={},l=[{value:"Introduction",id:"introduction",level:2},{value:"Background",id:"background",level:2},{value:"Options",id:"options",level:2},{value:"1. Export valid properties",id:"1-export-valid-properties",level:3},{value:"2. Create a database view or stored procedure to provide required data",id:"2-create-a-database-view-or-stored-procedure-to-provide-required-data",level:3},{value:"3. Use Civica UH database directly",id:"3-use-civica-uh-database-directly",level:3},{value:"Summary",id:"summary",level:2},{value:"Conclusion",id:"conclusion",level:2},{value:"Appendix A",id:"appendix-a",level:2}];function c(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"civica-universal-housing-integration",children:"Civica Universal Housing Integration"})}),"\n",(0,r.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,r.jsx)(n.p,{children:"Civica Universal Housing is a Housing Management System (HMS) which is used at Lincoln to manage social housing residents, properties and tenancies."}),"\n",(0,r.jsx)(n.p,{children:"The Housing Repairs Online service has a need to lookup properties that are valid for reporting repairs against using the service."}),"\n",(0,r.jsx)(n.p,{children:"This need will be facilitated by using Civica Universal Housing to provide details of valid properties."}),"\n",(0,r.jsx)(n.h2,{id:"background",children:"Background"}),"\n",(0,r.jsx)(n.p,{children:"Civica Universal Housing, UH, is a closed system which doesn\u2019t provide programmatic access (i.e. an API) for querying properties (or any other information)."}),"\n",(0,r.jsxs)(n.p,{children:["UH uses a database for storing its data.\nWe\u2019ve been provided with the database SQL that would be required to query UH for property details (see ",(0,r.jsx)(n.a,{href:"#appendix-a",children:"Appendix A"}),")."]}),"\n",(0,r.jsx)(n.h2,{id:"options",children:"Options"}),"\n",(0,r.jsx)(n.p,{children:"The following are possible approaches to using property information from UH:"}),"\n",(0,r.jsx)(n.h3,{id:"1-export-valid-properties",children:"1. Export valid properties"}),"\n",(0,r.jsx)(n.p,{children:"Valid property information could be exported by querying the UH database and provided in a suitable format that could be used by our service."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Pros:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Very simple to extract"}),"\n",(0,r.jsx)(n.li,{children:"Quick to set up"}),"\n",(0,r.jsx)(n.li,{children:"Would be agnostic of UH schema changes"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Cons:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"May become outdated as property changes are made to UH"}),"\n",(0,r.jsx)(n.li,{children:"Would need a process to maintain exported property data"}),"\n",(0,r.jsx)(n.li,{children:"Requires database level access, which may not be possible at all Local Authorities"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"2-create-a-database-view-or-stored-procedure-to-provide-required-data",children:"2. Create a database view or stored procedure to provide required data"}),"\n",(0,r.jsx)(n.p,{children:"A database view or stored procedure could be created that would provide property details."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Pros:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Easy to create"}),"\n",(0,r.jsx)(n.li,{children:"Data would always be current/up to date"}),"\n",(0,r.jsx)(n.li,{children:"Would be agnostic of UH schema changes"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Cons:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Requires database level access, which may not be possible at all Local Authorities"}),"\n",(0,r.jsx)(n.li,{children:"Local Authorities may not allow creation of views"}),"\n",(0,r.jsx)(n.li,{children:"Needing to prepare an external system creates an additional adoption dependency"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"3-use-civica-uh-database-directly",children:"3. Use Civica UH database directly"}),"\n",(0,r.jsx)(n.p,{children:"Use database access to retrieve current property details from a UH database."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Pros:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Property details will always be current"}),"\n",(0,r.jsx)(n.li,{children:"No external dependency maintenance required"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Cons:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Need to understand UH schema"}),"\n",(0,r.jsx)(n.li,{children:"Time consuming (possibly)"}),"\n",(0,r.jsx)(n.li,{children:"Requires database level access, which may not be possible at all Local Authorities"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsx)(n.p,{children:"Although options 1 and 2 are simple in nature and would be quick to deliver, they have major drawbacks of stale data and external dependencies respectively which make them undesirable."}),"\n",(0,r.jsx)(n.p,{children:"Option 3 could be slower to implement but removes external dependencies and would also provide property details which would always be current."}),"\n",(0,r.jsx)(n.p,{children:"Each of the options require database level access, which would need to be provided by the Local Authority requiring the service."}),"\n",(0,r.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,r.jsx)(n.p,{children:"I recommend using option 3 to create an API over the Universal Housing database such that current data is always available."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"appendix-a",children:"Appendix A"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT pr.prop_ref,\n       pr.u_nlpguprn,\n       Rtrim(pr.post_desig) + ' '\n       + Replace(pr.short_address, Rtrim(pr.post_desig), '')\n       + pr.post_code  AS address,\n       ptype.lu_desc   AS 'prop_type',\n       pr.sheltered,\n       pr.num_bedrooms AS 'beds',\n       pr.u_blk_floors AS 'floors',\n       ten.tenure\nFROM   property AS pr\n       --rent details\n       LEFT OUTER JOIN rent AS r\n                    ON pr.prop_ref = r.prop_ref\n       --tenancy\n       LEFT OUTER JOIN tenagree AS ten\n                    ON pr.prop_ref = ten.prop_ref\n       --property type description\n       LEFT OUTER JOIN (SELECT [lu_ref],\n                               [lu_desc]\n                        FROM   [UHLive].[dbo].[lookup]\n                        WHERE  lu_type = 'GPT') AS ptype\n                    ON r.prop_type = ptype.lu_ref\nWHERE  level_code IN ( '2' )\n       AND eot = '1900-01-01 00:00:00'\n\n"})})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>o});var r=i(6540);const s={},a=r.createContext(s);function t(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);